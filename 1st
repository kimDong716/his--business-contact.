# ğŸ“¦ Google Sheets ê¸°ë°˜ ê±°ë˜ì²˜ ì›”ë§ˆê° ì•± (GitHub ë°”ë¡œ ì—…ë¡œë“œìš©)

ì•„ë˜ êµ¬ì¡° ê·¸ëŒ€ë¡œ í´ë” ìƒì„± í›„ GitHubì— ì—…ë¡œë“œí•˜ë©´ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°ë³¸ í…œí”Œë¦¿ì…ë‹ˆë‹¤.

---

# 1ï¸âƒ£ í´ë” êµ¬ì¡°

```
closing-app/
â”œâ”€â”€ index.html
â”œâ”€â”€ app.js
â”œâ”€â”€ api.js
â”œâ”€â”€ auth.js
â”œâ”€â”€ config.js
â”œâ”€â”€ style.css
â””â”€â”€ README.md
```

---

# 2ï¸âƒ£ index.html

```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê±°ë˜ì²˜ ì›”ë§ˆê° ê´€ë¦¬</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="login-section" class="container">
    <h2>ê±°ë˜ì²˜ ì›”ë§ˆê° ì‹œìŠ¤í…œ</h2>
    <button onclick="loginWithGoogle()">Google ë¡œê·¸ì¸</button>
  </div>

  <div id="app-section" class="container" style="display:none;">
    <h2>ì›”ë§ˆê° ì…ë ¥</h2>

    <label>ì—°ì›”</label>
    <input type="month" id="month" />

    <label>ê±°ë˜ì²˜</label>
    <select id="clientSelect"></select>

    <label>ì…ê¸ˆì•¡</label>
    <input type="number" id="income" />

    <label>ì¶œê¸ˆì•¡</label>
    <input type="number" id="expense" />

    <label>ë¹„ê³ </label>
    <input type="text" id="memo" />

    <button onclick="saveClosing()">ì €ì¥</button>

    <h3>ì´ë²ˆë‹¬ ë‚´ì—­</h3>
    <table id="dataTable">
      <thead>
        <tr>
          <th>ê±°ë˜ì²˜</th>
          <th>ì…ê¸ˆ</th>
          <th>ì¶œê¸ˆ</th>
          <th>ì°¨ì•¡</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script src="config.js"></script>
  <script src="auth.js"></script>
  <script src="api.js"></script>
  <script src="app.js"></script>
</body>
</html>
```

---

# 3ï¸âƒ£ config.js (Apps Script URL ì…ë ¥)

```javascript
const CONFIG = {
  API_URL: "https://script.google.com/macros/s/AKfycbxK0qWzThWu1D4i7hEYTURY0Dq9CSraMUZS7ADRFKiDc-aV_na_YpAAQ0pWQwrDWWe0/exec"
};
```

---

# 4ï¸âƒ£ auth.js (Google ë¡œê·¸ì¸ ê¸°ë³¸ êµ¬ì¡°)

```javascript
function loginWithGoogle() {
  const email = prompt("êµ¬ê¸€ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”");
  if (!email) return;

  localStorage.setItem("userEmail", email);
  document.getElementById("login-section").style.display = "none";
  document.getElementById("app-section").style.display = "block";

  loadClients();
  loadMonthlyData();
}
```

---

# 5ï¸âƒ£ api.js (êµ¬ê¸€ì‹œíŠ¸ ì—°ë™ API)

```javascript
async function fetchAPI(action, data = {}) {
  const response = await fetch(CONFIG.API_URL, {
    method: "POST",
    body: JSON.stringify({ action, ...data }),
    headers: { "Content-Type": "application/json" }
  });
  return await response.json();
}

async function loadClients() {
  const result = await fetchAPI("getClients");
  const select = document.getElementById("clientSelect");
  select.innerHTML = "";

  result.forEach(client => {
    const option = document.createElement("option");
    option.value = client.id;
    option.textContent = client.name;
    select.appendChild(option);
  });
}

async function loadMonthlyData() {
  const month = document.getElementById("month").value;
  if (!month) return;

  const result = await fetchAPI("getMonthly", { month });
  const tbody = document.querySelector("#dataTable tbody");
  tbody.innerHTML = "";

  result.forEach(row => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${row.name}</td>
      <td>${row.income}</td>
      <td>${row.expense}</td>
      <td>${row.balance}</td>
    `;
    tbody.appendChild(tr);
  });
}

async function saveClosing() {
  const data = {
    month: document.getElementById("month").value,
    clientId: document.getElementById("clientSelect").value,
    income: document.getElementById("income").value,
    expense: document.getElementById("expense").value,
    memo: document.getElementById("memo").value,
    user: localStorage.getItem("userEmail")
  };

  await fetchAPI("saveClosing", data);
  alert("ì €ì¥ ì™„ë£Œ");
  loadMonthlyData();
}
```

---

# 6ï¸âƒ£ app.js

```javascript
document.getElementById("month").addEventListener("change", loadMonthlyData);
```

---

# 7ï¸âƒ£ style.css (ëª¨ë°”ì¼ ê²¸ìš© ë°˜ì‘í˜•)

```css
body {
  font-family: Arial;
  margin: 0;
  padding: 20px;
  background: #f5f6fa;
}

.container {
  max-width: 500px;
  margin: auto;
  background: white;
  padding: 20px;
  border-radius: 10px;
}

input, select, button {
  width: 100%;
  margin-top: 10px;
  padding: 10px;
  font-size: 16px;
}

table {
  width: 100%;
  margin-top: 15px;
  border-collapse: collapse;
}

th, td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}
```

---

# 8ï¸âƒ£ êµ¬ê¸€ì‹œíŠ¸ ì„¤ì • (DB êµ¬ì¡°)

ì‹œíŠ¸ 3ê°œ ìƒì„± (ì´ë¦„ ì •í™•íˆ ë™ì¼)

â‘  Clients
```
id | name | status | created_at
1 | Aê±°ë˜ì²˜ | active | 2026-01
2 | Bê±°ë˜ì²˜ | inactive | 2026-01
```

â‘¡ Monthly_Closing
```
id | month | client_id | name | income | expense | balance | memo | user | timestamp
```

â‘¢ Users
```
email | role | active
admin@gmail.com | admin | Y
```
